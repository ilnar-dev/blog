<%- include('header'); %>

<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
    <div class="container">
        <% if (article.id) { %>
            <h1>Edit article</h1>
            <form action="/admin/articles/<%= article.id %>" method="post" enctype="multipart/form-data">
        <% } else { %>
            <h1>Create article</h1>
            <form action="/admin/articles" method="post" enctype="multipart/form-data">
        <% } %>

            <div class="form-group">
                <label for="title">Post title</label>
                <input class="form-control" type="text" id="title" name="title" value="<%= article.title %>">
            </div>
            <div class="form-group">
                <label for="intro">Post intro</label>
                <textarea cols="6" class="form-control" type="text" id="intro" name="intro"><%= article.intro %></textarea>
            </div>
            <div class="form-group">
                <label for="text">Post text</label>
                <textarea cols="6" class="form-control" type="text" id="text" name="text"><%= article.text %></textarea>
            </div>
            <div id="mainImageGroup" class="form-group">
                <input type="hidden" id="main_image_id" name="main_image_id" value="<%= article.main_image_id%>">
                <div id="mainImageUpload">
                    <label for="mainImage">Upload new main image</label>
                    <input class="form-control-file" type="file" id="mainImage" name="mainImage">
                </div>
            </div>
            <div class="form-group">
                <label for="published">Published</label>
                <input class="form-control" type="checkbox" id="published" name="published"  <% if (article.published) { %> checked <% } %>>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
        </form>
    </div>
</main>
<script src="/js/ckeditor.js"></script>

<script>
    // CKEditor
    ClassicEditor
        .create( document.querySelector( '#text' ), {
            simpleUpload: {
                uploadUrl: '/admin/images',
            }
        } )
        .then( /* ... */ )
        .catch( /* ... */ );
</script>
<%- include('footer'); %>
